{"version":3,"sources":["file:///C:/Users/%E8%BE%9B%E9%B9%8F/Desktop/CCS/AmbitiousApp/Ambitious/assets/scripts/Warehouse/Createnew.ts"],"names":["_decorator","Button","Component","instantiate","Label","Prefab","v3","GameManager","ccclass","property","Createnew","Loacthousecount","MaxhouseCount","currentHouseCount","Y","start","console","log","onLoad","strlabel","node","getChildByName","getComponent","str","inst","_playerName","string","_Store","cpint2","_Money","i","CreateShelf","update","deltaTime","panel","active","bool","AddWareHouse","num","newx","newy","quotient","Math","floor","remainder","house","House","setPosition","LAB","setParent","error"],"mappings":"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","sourcesContent":["import {\r\n  _decorator,\r\n  Button,\r\n  Component,\r\n  instantiate,\r\n  Label,\r\n  math,\r\n  Node,\r\n  Prefab,\r\n  v2,\r\n  v3,\r\n} from \"cc\";\r\nimport { GameManager } from \"../Globla/GameManger\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"Createnew\")\r\nexport class Createnew extends Component {\r\n  @property(Button)\r\n  button: Button = null;\r\n  @property(Prefab)\r\n  House: Prefab = null;\r\n  Loacthousecount: number = 0;\r\n  MaxhouseCount = 8;\r\n  currentHouseCount = 0;\r\n  Y: number = 300;\r\n  start() {\r\n    console.log(\"start\");\r\n  }\r\n  protected onLoad(): void {\r\n    let strlabel = this.node.getChildByName(\"Tip\").getComponent(Label);\r\n    const str = GameManager.inst()._playerName;\r\n\r\n    strlabel.string = str + \"的仓库\";\r\n    this.Loacthousecount = GameManager.inst()._Store;\r\n\r\n    let cpint2 = GameManager.inst()._Money;\r\n\r\n    for (let i = 1; i <= this.Loacthousecount; i++) {\r\n      this.CreateShelf();\r\n    }\r\n  }\r\n  update(deltaTime: number) {}\r\n  /**\r\n   * 创建货架\r\n   */\r\n  CreateShelf() {\r\n    if (this.currentHouseCount === this.MaxhouseCount) {\r\n      let panel = this.node.getChildByName(\"MessagePanel\");\r\n      panel.active = true;\r\n      return false;\r\n    }\r\n    let bool = this.AddWareHouse(this.currentHouseCount + 1);\r\n    this.currentHouseCount = bool\r\n      ? this.currentHouseCount + 1\r\n      : this.currentHouseCount;\r\n  }\r\n  AddWareHouse(num: number): boolean {\r\n    try {\r\n      let newx = 0;\r\n      let newy = 0;\r\n\r\n      // 计算商和余数\r\n      let quotient = Math.floor(num / 2); // 商\r\n      let remainder = num % 2; // 余数\r\n\r\n      // 根据余数设置 newx\r\n      newx = remainder === 0 ? 180 : -180;\r\n\r\n      // 根据 quotient 计算 newy 的位置\r\n      newy = this.Y - (quotient + remainder) * 200;\r\n\r\n      const house = instantiate(this.House);\r\n      house.setPosition(v3(newx, newy, 0)); // 设置房屋位置\r\n      let LAB = house.getChildByName(\"Title\").getComponent(Label);\r\n      LAB.string = \"鲜花\";\r\n      house.setParent(this.node); // 将房屋添加到当前节点\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n"]}